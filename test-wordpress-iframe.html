<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ iframe - –ò–º–∏—Ç–∞—Ü–∏—è WordPress</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }

        .header {
            background-color: #23282d;
            color: white;
            padding: 20px;
            text-align: center;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
            background-color: white;
            min-height: 100vh;
        }

        h1 {
            color: #23282d;
            margin-bottom: 20px;
        }

        .info-box {
            background-color: #e7f3ff;
            border-left: 4px solid #0073aa;
            padding: 15px;
            margin-bottom: 30px;
        }

        .iframe-container {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 20px;
            margin-bottom: 30px;
        }

        iframe {
            width: 100%;
            border: none;
            overflow: hidden;
            display: block;
            min-height: 500px;
        }

        .console-output {
            background-color: #1e1e1e;
            color: #d4d4d4;
            padding: 15px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
        }

        .console-output div {
            padding: 3px 0;
            border-bottom: 1px solid #333;
        }

        .console-output .log {
            color: #4ec9b0;
        }

        .console-output .warn {
            color: #ce9178;
        }

        .console-output .error {
            color: #f48771;
        }

        .footer {
            text-align: center;
            padding: 40px 20px;
            background-color: #23282d;
            color: white;
            margin-top: 40px;
        }

        .status {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }

        .status.ready {
            background-color: #46b450;
            color: white;
        }

        .status.loading {
            background-color: #ffb900;
            color: black;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üéß –ò–º–∏—Ç–∞—Ü–∏—è WordPress - –¢–µ—Å—Ç –Ω–∞ —Å–ª—É—Ö</h1>
        <p>–¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã iframe</p>
    </div>

    <div class="container">
        <div class="info-box">
            <h3>‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
            <p>–≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–º–∏—Ç–∏—Ä—É–µ—Ç WordPress –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ iframe.</p>
            <p><strong>–°—Ç–∞—Ç—É—Å:</strong> <span class="status loading" id="status">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
        </div>

        <h2>–¢–µ—Å—Ç –Ω–∞ —Å–ª—É—Ö</h2>
        <p style="margin-bottom: 20px;">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—à —Å–ª—É—Ö —Å –ø–æ–º–æ—â—å—é –Ω–∞—à–µ–≥–æ –æ–Ω–ª–∞–π–Ω-—Ç–µ—Å—Ç–∞. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ —Ç–µ—Å—Ç–µ –Ω–∏–∂–µ.</p>

        <div class="iframe-container">
            <iframe
                id="hearing-test-iframe"
                src="http://localhost:5176/"
                scrolling="no"
                frameborder="0"
                title="–¢–µ—Å—Ç –Ω–∞ —Å–ª—É—Ö">
            </iframe>
            <!-- –î–ª—è production –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞: https://test-sluha.netlify.app/ -->
        </div>

        <h3>–ö–æ–Ω—Å–æ–ª—å —Å–æ–±—ã—Ç–∏–π</h3>
        <div class="console-output" id="console-output">
            <div class="log">[–°–∏—Å—Ç–µ–º–∞] –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ iframe...</div>
        </div>
    </div>

    <div class="footer">
        <p>&copy; 2024 –¢–µ—Å—Ç –Ω–∞ —Å–ª—É—Ö. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        <p style="margin-top: 10px; font-size: 14px; opacity: 0.7;">
            –≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
        </p>
    </div>

    <script>
    (function() {
        'use strict';

        // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã
        const iframe = document.getElementById('hearing-test-iframe');
        const consoleOutput = document.getElementById('console-output');
        const statusElement = document.getElementById('status');

        if (!iframe) {
            addLog('error', 'iframe –Ω–µ –Ω–∞–π–¥–µ–Ω!');
            return;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ª–æ–≥–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª—å
        function addLog(type, message) {
            const div = document.createElement('div');
            div.className = type;
            const timestamp = new Date().toLocaleTimeString();
            div.textContent = `[${timestamp}] ${message}`;
            consoleOutput.appendChild(div);

            // –ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–Ω–∏–∑
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }

        // –°–ª—É—à–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç iframe
        window.addEventListener('message', function(event) {
            const data = event.data;

            // –õ–æ–≥–∏—Ä—É–µ–º –≤—Å–µ –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
            addLog('log', `–ü–æ–ª—É—á–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ: ${JSON.stringify(data)}`);

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –≤—ã—Å–æ—Ç–æ–π
            if (data.type === 'iframe-height' && data.height) {
                const height = parseInt(data.height, 10);
                if (height > 0) {
                    iframe.style.height = height + 'px';
                    addLog('log', `‚úì –í—ã—Å–æ—Ç–∞ iframe –æ–±–Ω–æ–≤–ª–µ–Ω–∞: ${height}px`);
                }
            }

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ –≤–≤–µ—Ä—Ö
            if (data.type === 'iframe-scroll-top' && data.scrollTop) {
                const iframeTop = iframe.getBoundingClientRect().top + window.pageYOffset;
                const offset = 100; // –æ—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É

                window.scrollTo({
                    top: iframeTop - offset,
                    behavior: 'smooth'
                });

                addLog('log', '‚úì –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ iframe –≤—ã–ø–æ–ª–Ω–µ–Ω–∞');
            }

            // –°–æ–æ–±—â–µ–Ω–∏–µ –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ iframe
            if (data.type === 'iframe-ready') {
                addLog('log', '‚úì iframe –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!');
                statusElement.textContent = '–ì–æ—Ç–æ–≤–æ';
                statusElement.className = 'status ready';
            }
        });

        addLog('log', '–°–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω. –û–∂–∏–¥–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç iframe...');

        // –¢–∞–π–º–∞—É—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏
        setTimeout(function() {
            if (statusElement.textContent === '–ó–∞–≥—Ä—É–∑–∫–∞...') {
                addLog('warn', 'iframe –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏–ª —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ React-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ.');
            }
        }, 3000);

    })();
    </script>
</body>
</html>
